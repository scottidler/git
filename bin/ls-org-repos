#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import os
import re
import sys
import requests
sys.dont_write_bytecode = True

from argparse import ArgumentParser

def get_org_repos(organization):
    reponames = []
    page = 1
    github = 'https://api.github.com/orgs'
    url = '{github}/{organization}/repos?page={page}'.format(**locals())
    repos = requests.get(url).json()
    while repos:
        for repo in repos:
            full_name = repo['full_name']
            reponames += [repo['full_name']]
        page += 1
        url = '{github}/{organization}/repos?page={page}'.format(**locals())
        repos = requests.get(url).json()
    return reponames

def print_org_repos(reponames):
    for reponame in reponames:
        print('https://github.com/' + reponame)

if __name__ == '__main__':
    parser = ArgumentParser()
    parser.add_argument(
        'organization',
        help='supply the github organization')

    ns = parser.parse_args()
    reponames = get_org_repos(**ns.__dict__)
    print_org_repos(reponames)

